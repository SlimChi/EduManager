import React, {useRef, useState} from 'react';
import {FaCheck, FaFlask, FaAtom, FaWater, FaVial, FaExclamationTriangle} from 'react-icons/fa';
import '../../../../styles/activites.css';
import {useLocation, useParams} from 'react-router-dom';
import BackButton from '../../../../components/navigation/BackButton';
import PrintManager from '../../../../utils/PrintManager';
import ModalImage from "../../../../utils/ModalImage";

// Images (√† remplacer par les v√¥tres)
import eauVolvic from "../../../../assets/geek.png";
import eauContrex from "../../../../assets/geek.png";
import testIons from "../../../../assets/hamac.png";

const Act3et4Chimie = () => {
    const {classId} = useParams();
    const location = useLocation();
    const className = location.state?.className || '';
    const contentRef = useRef();

    // √âtats pour les r√©ponses
    const [answers, setAnswers] = useState({
        question1: [],
        question2: '',
        question3: [],
        question4: [],
        question5: '',
        question6: [],
        question7: '',
        question8: '',
        question9: [],
        question10: '',
        question11: '',
        question12: '',
        question13: '',
        question14: '',
        question15: '',
        question16: '',
        question17: '',
        question18: '',
        question19: '',
        question20: '',
    });

    const [showCorrections, setShowCorrections] = useState({
        question1: false,
        question2: false,
        question3: false,
        question4: false,
        question5: false,
        question6: false,
        question7: false,
        question8: false,
        question9: false,
        question10: false,
        question11: false,
        question12: false,
        question13: false,
        question14: false,
        question15: false,
        question16: false,
        question17: false,
        question18: false,
        question19: false,
        question20: false,
    });

    // R√©ponses attendues
    const correctAnswers = {
        question1: ['Ca¬≤‚Å∫', 'Fe¬≤‚Å∫'],
        question2: 'Oxalate d\'ammonium pour Ca¬≤‚Å∫ et hydroxyde de sodium (soude) pour Fe¬≤‚Å∫',
        question3: ['Lunettes', 'Gants', 'Blouse'],
        question4: ['Oxalate d\'ammonium', 'Hydroxyde de sodium'],
        question5: 'Oui, car un pr√©cipit√© blanc se forme avec l\'oxalate d\'ammonium (preuve de Ca¬≤‚Å∫) et un pr√©cipit√© vert se forme avec la soude (preuve de Fe¬≤‚Å∫)',
        question6: ['Ca¬≤‚Å∫'],
        question7: 'Volvic',
        question8: 'Oxalate d\'ammonium',
        question9: ['2 tubes √† essai + porte-tubes', 'Gants', 'Blouse', 'Lunettes', 'Oxalate d\'ammonium'],
        question10: 'Contrex est calcique car elle forme un pr√©cipit√© blanc avec l\'oxalate d\'ammonium, contrairement √† Volvic',
        question11: 'Volvic',
        question12: 'Liu a raison car Volvic ne forme pas de pr√©cipit√© avec l\'oxalate d\'ammonium, donc elle n\'est pas calcique',
        question13: 'Ca¬≤‚Å∫',
        question14: 'Ca¬≤‚Å∫ (ion calcium)',
        question15: 'Oxalate d\'ammonium',
        question16: 'Pr√©cipit√© blanc',
        question17: 'Volvic',
        question18: 'Contrex',
        question19: 'Non, car elle est calcique forme un pr√©cipit√©',
        question20: 'Oui, car elle ne forme pas de pr√©cipit√© avec '
};

    // Gestionnaires d'√©v√©nements
    const handleInputChange = (field, value) => {
        setAnswers((prev) => ({...prev, [field]: value}));
    };

    const handleCheckboxChange = (field, value, isChecked) => {
        setAnswers((prev) => {
            const currentValues = prev[field] || [];
            if (isChecked) {
                return {...prev, [field]: [...currentValues, value]};
            } else {
                return {...prev, [field]: currentValues.filter(item => item !== value)};
            }
        });
    };

    const [modalState, setModalState] = useState({
        show: false, imageUrl: '', altText: '',
    });

    const openModal = (imageUrl, altText) => {
        setModalState({show: true, imageUrl, altText});
    };

    const closeModal = () => {
        setModalState((prev) => ({...prev, show: false}));
    };

    const toggleCorrection = (field) => {
        setShowCorrections((prev) => ({...prev, [field]: !prev[field]}));

        if (!answers[field] && !showCorrections[field]) {
            setAnswers((prev) => ({...prev, [field]: correctAnswers[field]}));
        }
    };

    if (className === 'Seconde-chimie-act3') {
        return <div>Cette activit√© n'est pas disponible pour cette classe.</div>;
    }

    return (<>
        <BackButton/>
        <div className="tp-container" id="chimie-content" ref={contentRef}>
            <PrintManager
                contentRef={contentRef}
                activityName="Chimie_Ions_Eaux_Minerales"
                pageCount={3}
                quality="hd"
            />

            {/* PAGE 1 - ACTIVIT√â 3 */}
            <div className="print-page" id="page1-start">
                <section className="tp-section compact">
                    <div className="math-chapter-box blue" style={{padding: '10px', marginTop: '-10px'}}>
                        <h3 className="math-chapter-title-test mb-0">Chapitre 2 - Identification des ions dans les solutions m√©dicamenteuses</h3>
                    </div>

                    <div className="activity-header mt-0">
                        <span className="activity-badge">ACTIVIT√â 3</span>
                        <div className="activity-title">
                            <span className="course-title">
                                <FaFlask/> <span>üíä</span> ¬´ Identifier les ions pr√©sents dans une solution m√©dicamenteuse ¬ª
                            </span>
                        </div>
                    </div>

                    <div className="d-flex align-items-start flex-wrap" style={{gap: '20px'}}>
                        <div style={{flex: 1, minWidth: '300px'}}>
                            <div className="renovation-contexte">
                                <h5 className="mb-3 text-primary fw-bold">
                                    üè• "Carence en fer et calcium : choisir la bonne eau min√©rale"
                                </h5>

                                <p style={{
                                    textAlign: 'justify',
                                    textJustify: 'inter-word',
                                    fontSize: '16px',
                                    lineHeight: '1.4'
                                }}>
                                    L'analyse sanguine de Charlotte montre qu'elle pr√©sente une forte carence en fer et en calcium.
                                    Son m√©decin lui prescrit du fer √† raison d'un comprim√© √† dissoudre dans un verre d'eau min√©rale riche en calcium.
                                    Charlotte choisit comme eau min√©rale l'eau de Volvic. Comment savoir si cette eau convient √† sa pathologie ?
                                    <br/>
                                    <span style={{fontStyle: 'italic', color: '#2e7d32'}}>
                                        "Comment identifier la pr√©sence des ions n√©cessaires dans l'eau min√©rale ?"
                                    </span>
                                </p>
                            </div>
                        </div>
                        <div className="flex-shrink-0"
                             style={{maxWidth: '250px', cursor: 'pointer', marginTop: '10px'}}>
                            <img
                                src={eauVolvic}
                                alt="Eau de Volvic"
                                className="img-fluid rounded shadow-sm compact-img"
                                onClick={() => openModal(eauVolvic, 'Eau de Volvic')}
                            />
                        </div>
                    </div>

                    <div className="objectif-box" style={{marginTop: '5px', marginBottom: '5px'}}>
                        <div className="objectif-title"><strong style={{color: 'orangered'}}> Objectif :</strong> üéØ
                        </div>
                        <p>Identifier exp√©rimentalement la pr√©sence d'ions calcium et fer dans une solution m√©dicamenteuse.</p>
                    </div>

                    {/* Section S'approprier */}
                    <div className="question-card mt-0">
                        <div className="question-content">
                            <h4 className="vect-title"
                                style={{display: 'inline', marginRight: '10px'}}>
                                <span>S'approprier</span>
                            </h4>
                            <p style={{display: 'inline', textAlign: 'justify'}}>
                                1. Indiquer quels ions Charlotte doit absorber pour ne plus √™tre en carence (cocher les bonnes r√©ponses) :
                            </p>
                            <div style={{display: 'flex', flexWrap: 'wrap', gap: '15px', marginTop: '10px'}}>
                                {['Cl‚Åª', 'Ca¬≤‚Å∫', 'SO‚ÇÑ¬≤‚Åª', 'Fe¬≤‚Å∫', 'Fe¬≥‚Å∫', 'Cu¬≤‚Å∫', 'Zn¬≤‚Å∫', 'Al¬≥‚Å∫'].map(ion => (
                                    <label key={ion} style={{display: 'flex', alignItems: 'center'}}>
                                        <input
                                            type="checkbox"
                                            checked={answers.question1.includes(ion)}
                                            onChange={(e) => handleCheckboxChange('question1', ion, e.target.checked)}
                                            style={{marginRight: '8px'}}
                                        />
                                        {ion}
                                    </label>
                                ))}
                            </div>
                            <button
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection('question1')}
                                style={{marginTop: '10px'}}
                            >
                                <FaCheck/> {showCorrections.question1 ? 'Masquer la correction' : 'Afficher la correction'}
                            </button>
                        </div>

                        <div className="question-content">
                            <h4 className="vect-title" style={{display: 'inline', marginRight: '10px'}}>
                                <span>S'approprier</span>
                            </h4>
                            <p style={{display: 'inline', textAlign: 'justify'}}>
                                2. √Ä l'aide du tableau de caract√©risation des ions, quels r√©actifs utiliser pour prouver la pr√©sence des ions n√©cessaires √† Charlotte ?
                            </p>
                            <div style={{
                                marginTop: '15px',
                                padding: '10px',
                                background: '#f5f5f5',
                                borderRadius: '5px'
                            }}>
                                <p>Pour Ca¬≤‚Å∫ : ............................................................................................................................................................................................</p>
                                <p>Pour Fe¬≤‚Å∫ : ............................................................................................................................................................................................</p>
                            </div>
                            <button
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection('question2')}
                                style={{marginTop: '10px'}}
                            >
                                <FaCheck/> {showCorrections.question2 ? 'Masquer la correction' : 'Afficher la correction'}
                            </button>
                        </div>

                        <div className="question-content">
                            <h4 className="vect-title" style={{display: 'inline', marginRight: '10px'}}>
                                <span>S'approprier</span>
                            </h4>
                            <p style={{display: 'inline', textAlign: 'justify'}}>
                                3. Quelles pr√©cautions individuelles doit-on prendre pour manipuler ces r√©actifs ?
                            </p>
                            <div style={{display: 'flex', flexWrap: 'wrap', gap: '15px', marginTop: '10px'}}>
                                {['Masque', 'Lunettes', 'Gants', 'Blouse'].map(protection => (
                                    <label key={protection} style={{display: 'flex', alignItems: 'center'}}>
                                        <input
                                            type="checkbox"
                                            checked={answers.question3.includes(protection)}
                                            onChange={(e) => handleCheckboxChange('question3', protection, e.target.checked)}
                                            style={{marginRight: '8px'}}
                                        />
                                        {protection}
                                    </label>
                                ))}
                            </div>
                            <button
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection('question3')}
                                style={{marginTop: '10px'}}
                            >
                                <FaCheck/> {showCorrections.question3 ? 'Masquer la correction' : 'Afficher la correction'}
                            </button>
                        </div>

                        {/* Tableau de caract√©risation des ions */}
                        <div style={{
                            margin: '20px 0',
                            padding: '15px',
                            background: '#e8f5e9',
                            borderRadius: '8px',
                            border: '1px solid #c8e6c9'
                        }}>
                            <h5 style={{textAlign: 'center', color: '#2e7d32', marginBottom: '15px'}}>
                                Tableau de caract√©risation des ions
                            </h5>
                            <div className="table-responsive">
                                <table className="table table-bordered" style={{fontSize: '14px'}}>
                                    <thead>
                                    <tr>
                                        <th>Ion √† identifier</th>
                                        <th>Chlorure Cl‚Åª</th>
                                        <th>Calcium Ca¬≤‚Å∫</th>
                                        <th>Sulfate SO‚ÇÑ¬≤‚Åª</th>
                                        <th>Fer II Fe¬≤‚Å∫</th>
                                        <th>Fer III Fe¬≥‚Å∫</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>R√©actif</td>
                                        <td>Nitrate d'argent</td>
                                        <td>Oxalate d'ammonium</td>
                                        <td>Chlorure de baryum</td>
                                        <td>Hydroxyde de sodium (soude)</td>
                                        <td>Hydroxyde de sodium (soude)</td>
                                    </tr>
                                    <tr>
                                        <td>Couleur du pr√©cipit√©</td>
                                        <td>Blanc (noircit √† la lumi√®re)</td>
                                        <td>Blanc</td>
                                        <td>Blanc</td>
                                        <td>Vert</td>
                                        <td>Rouille</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div className="question-content">
                            <h4 className="vect-title" style={{display: 'inline', marginRight: '10px'}}>
                                <span>R√©aliser</span>
                            </h4>
                            <p style={{display: 'inline', textAlign: 'justify'}}>
                                4. R√©sultats de l'exp√©rience : Quelques gouttes des r√©actifs appropri√©s ont √©t√© ajout√©es :
                                ...................................... pour d√©tecter le calcium (Ca¬≤‚Å∫) et ...................................... pour d√©tecter le fer (Fe¬≤‚Å∫).
                            </p>
                            <div style={{display: 'flex', flexWrap: 'wrap', gap: '15px', marginTop: '10px'}}>
                                {['Nitrate d\'argent', 'Oxalate d\'ammonium', 'Chlorure de baryum', 'Hydroxyde de sodium'].map(reactif => (
                                    <label key={reactif} style={{display: 'flex', alignItems: 'center'}}>
                                        <input
                                            type="checkbox"
                                            checked={answers.question4.includes(reactif)}
                                            onChange={(e) => handleCheckboxChange('question4', reactif, e.target.checked)}
                                            style={{marginRight: '8px'}}
                                        />
                                        {reactif}
                                    </label>
                                ))}
                            </div>
                            <button
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection('question4')}
                                style={{marginTop: '10px'}}
                            >
                                <FaCheck/> {showCorrections.question4 ? 'Masquer la correction' : 'Afficher la correction'}
                            </button>
                        </div>

                        <div className="question-content">
                            <h4 className="vect-title" style={{display: 'inline', marginRight: '10px'}}>
                                <span>Valider</span>
                            </h4>
                            <p style={{display: 'inline', textAlign: 'justify'}}>
                                5. La solution m√©dicamenteuse pr√©par√©e avec de l'eau de Volvic contient-elle des ions Ca¬≤‚Å∫ et des ions Fe¬≤‚Å∫ ? Justifier la r√©ponse.
                            </p>
                            <textarea
                                className="form-control"
                                rows="3"
                                value={answers.question5}
                                onChange={(e) => handleInputChange('question5', e.target.value)}
                                style={{marginTop: '10px'}}
                            ></textarea>
                            <button
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection('question5')}
                                style={{marginTop: '10px'}}
                            >
                                <FaCheck/> {showCorrections.question5 ? 'Masquer la correction' : 'Afficher la correction'}
                            </button>
                        </div>

                        <div className="question-content">
                            <h4 className="vect-title" style={{display: 'inline', marginRight: '10px'}}>
                                <span>Communiquer</span>
                            </h4>
                            <p style={{display: 'inline', textAlign: 'justify'}}>
                                6. L'eau min√©rale choisie par Charlotte est-elle appropri√©e √† sa pathologie ?
                            </p>
                            <div style={{display: 'flex', gap: '20px', marginTop: '10px'}}>
                                <label style={{display: 'flex', alignItems: 'center'}}>
                                    <input
                                        type="radio"
                                        name="question6"
                                        value="Oui"
                                        onChange={() => handleInputChange('question6', 'Oui')}
                                        style={{marginRight: '8px'}}
                                    />
                                    Oui
                                </label>
                                <label style={{display: 'flex', alignItems: 'center'}}>
                                    <input
                                        type="radio"
                                        name="question6"
                                        value="Non"
                                        onChange={() => handleInputChange('question6', 'Non')}
                                        style={{marginRight: '8px'}}
                                    />
                                    Non
                                </label>
                            </div>
                            <button
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection('question6')}
                                style={{marginTop: '10px'}}
                            >
                                <FaCheck/> {showCorrections.question6 ? 'Masquer la correction' : 'Afficher la correction'}
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            {/* PAGE 2 - ACTIVIT√â 4 */}
            <div className="print-page" id="page2-start">
                <section className="tp-section compact">
                    <div className="math-chapter-box blue" style={{padding: '0'}}>
                        <span style={{marginRight: '10px', fontSize: '30px'}}>üíß</span>
                        <h2 className="math-chapter-title-test">Chimie - Identification d'ions dans une eau</h2>
                    </div>

                    <div className="activity-header">
                        <span className="activity-badge">ACTIVIT√â 4</span>
                        <div className="activity-title">
                            <span className="course-title">
                                <FaVial/> <span>üîç</span> ¬´ Identifier un ion dans une eau ¬ª
                            </span>
                        </div>
                    </div>

                    <div className="d-flex align-items-start flex-wrap" style={{gap: '20px'}}>
                        <div style={{flex: 1, minWidth: '300px'}}>
                            <div className="renovation-contexte">
                                <p style={{
                                    textAlign: 'justify',
                                    textJustify: 'inter-word',
                                    fontSize: '15px',
                                    lineHeight: '1.4'
                                }}>
                                    Cyril vient d'√™tre op√©r√© d'un calcul r√©nal, petit caillou de calcium qui s'est form√© dans un de ses reins.
                                    Son m√©decin lui d√©conseille de boire des eaux ¬´ calciques ¬ª, c'est-√†-dire tr√®s riches en ions calcium.
                                    <br/>
                                    Dans le rayon des eaux min√©rales d'un supermarch√©, Cyril, accompagn√© de son amie Liu, h√©site entre Volvic et Contrex.
                                    <br/>
                                    <strong className="text-primary">
                                        Comment savoir si une de ces deux eaux min√©rales est calcique ?
                                    </strong>
                                </p>
                            </div>
                        </div>
                        <div className="flex-shrink-0"
                             style={{maxWidth: '250px', cursor: 'pointer'}}>
                            <img
                                src={eauContrex}
                                alt="Eau de Contrex"
                                className="img-fluid rounded shadow-sm compact-img"
                                onClick={() => openModal(eauContrex, 'Eau de Contrex')}
                            />
                        </div>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Je formule une hypoth√®se</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            7. Une eau ¬´ calcique ¬ª est une eau riche en ions (cocher la bonne r√©ponse) :
                        </p>
                        <div style={{display: 'flex', flexWrap: 'wrap', gap: '15px', marginTop: '10px'}}>
                            {['Sodium Na‚Å∫', 'Sulfate SO‚ÇÑ¬≤‚Åª', 'Calcium Ca¬≤‚Å∫'].map(ion => (
                                <label key={ion} style={{display: 'flex', alignItems: 'center'}}>
                                    <input
                                        type="checkbox"
                                        checked={answers.question7.includes(ion)}
                                        onChange={(e) => handleCheckboxChange('question7', ion, e.target.checked)}
                                        style={{marginRight: '8px'}}
                                    />
                                    {ion}
                                </label>
                            ))}
                        </div>

                        <p style={{marginTop: '15px'}}>
                            8. Quelle est l'eau la plus adapt√©e √† l'√©tat de sant√© de Cyril ?
                        </p>
                        <div style={{display: 'flex', gap: '20px', marginTop: '10px'}}>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question8"
                                    value="Contrex"
                                    onChange={() => handleInputChange('question8', 'Contrex')}
                                    style={{marginRight: '8px'}}
                                />
                                Contrex
                            </label>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question8"
                                    value="Volvic"
                                    onChange={() => handleInputChange('question8', 'Volvic')}
                                    style={{marginRight: '8px'}}
                                />
                                Volvic
                            </label>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question8"
                                    value="Je ne sais pas"
                                    onChange={() => handleInputChange('question8', 'Je ne sais pas')}
                                    style={{marginRight: '8px'}}
                                />
                                Je ne sais pas
                            </label>
                        </div>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Je propose un protocole exp√©rimental</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            9. Mat√©riel n√©cessaire (cocher les √©l√©ments n√©cessaires) :
                        </p>
                        <div style={{display: 'flex', flexWrap: 'wrap', gap: '15px', marginTop: '10px'}}>
                            {['2 tubes √† essai + porte-tubes', 'pH-m√®tre', 'Gants', 'Blouse', 'Lunettes', 'Nitrate d\'argent', 'Oxalate d\'ammonium', 'Chlorure de baryum'].map(materiel => (
                                <label key={materiel} style={{display: 'flex', alignItems: 'center'}}>
                                    <input
                                        type="checkbox"
                                        checked={answers.question9.includes(materiel)}
                                        onChange={(e) => handleCheckboxChange('question9', materiel, e.target.checked)}
                                        style={{marginRight: '8px'}}
                                    />
                                    {materiel}
                                </label>
                            ))}
                        </div>
                    </div>

                    {/* Espace pour image suppl√©mentaire */}
                    <div style={{
                        margin: '20px 0',
                        textAlign: 'center'
                    }}>
                        <img
                            src={testIons}
                            alt="Test d'identification des ions"
                            className="img-fluid rounded shadow-sm"
                            style={{maxWidth: '300px', cursor: 'pointer'}}
                            onClick={() => openModal(testIons, 'Test d\'identification des ions')}
                        />
                        <p style={{fontSize: '14px', color: '#666', marginTop: '8px'}}>
                            Test d'identification des ions en laboratoire
                        </p>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>R√©sultat de l'exp√©rience</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            10. Apr√®s avoir ajout√© quelques gouttes d'oxalate d'ammonium dans deux tubes √† essai :
                        </p>
                        <ul style={{marginTop: '10px'}}>
                            <li>Un pr√©cipit√© blanc appara√Æt dans le tube contenant de l'eau Contrex.</li>
                            <li>Il n'y a pas de pr√©cipit√© dans le tube contenant de l'eau Volvic.</li>
                        </ul>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Je valide</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            11. Confirmer ou non l'hypoth√®se initiale selon les r√©sultats exp√©rimentaux obtenus :
                        </p>
                        <textarea
                            className="form-control"
                            rows="3"
                            value={answers.question11}
                            onChange={(e) => handleInputChange('question11', e.target.value)}
                            style={{marginTop: '10px'}}
                        ></textarea>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Je communique</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            12. Cyril a-t-il raison de choisir l'eau Volvic ?
                        </p>
                        <textarea
                            className="form-control"
                            rows="2"
                            value={answers.question12}
                            onChange={(e) => handleInputChange('question12', e.target.value)}
                            style={{marginTop: '10px'}}
                        ></textarea>
                    </div>

                    {/* Questions suppl√©mentaires pour compl√©ter l'activit√© */}
                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Analyser/Raisonner</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            13. Quel ion est responsable de la formation des calculs r√©naux ?
                        </p>
                        <div style={{display: 'flex', gap: '20px', marginTop: '10px'}}>
                            {['Na‚Å∫', 'Ca¬≤‚Å∫', 'Cl‚Åª', 'SO‚ÇÑ¬≤‚Åª'].map(ion => (
                                <label key={ion} style={{display: 'flex', alignItems: 'center'}}>
                                    <input
                                        type="radio"
                                        name="question13"
                                        value={ion}
                                        onChange={() => handleInputChange('question13', ion)}
                                        style={{marginRight: '8px'}}
                                    />
                                    {ion}
                                </label>
                            ))}
                        </div>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Analyser/Raisonner</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            14. Quel ion caract√©rise une eau "calcique" ?
                        </p>
                        <input
                            type="text"
                            className="form-control"
                            value={answers.question14}
                            onChange={(e) => handleInputChange('question14', e.target.value)}
                            style={{marginTop: '10px', maxWidth: '300px'}}
                        />
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Analyser/Raisonner</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            15. Quel r√©actif permet de d√©tecter sp√©cifiquement les ions calcium ?
                        </p>
                        <div style={{display: 'flex', gap: '20px', marginTop: '10px'}}>
                            {['Nitrate d\'argent', 'Oxalate d\'ammonium', 'Chlorure de baryum', 'Hydroxyde de sodium'].map(reactif => (
                                <label key={reactif} style={{display: 'flex', alignItems: 'center'}}>
                                    <input
                                        type="radio"
                                        name="question15"
                                        value={reactif}
                                        onChange={() => handleInputChange('question15', reactif)}
                                        style={{marginRight: '8px'}}
                                    />
                                    {reactif}
                                </label>
                            ))}
                        </div>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Analyser/Raisonner</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            16. Quelle observation permet de confirmer la pr√©sence d'ions calcium ?
                        </p>
                        <input
                            type="text"
                            className="form-control"
                            value={answers.question16}
                            onChange={(e) => handleInputChange('question16', e.target.value)}
                            style={{marginTop: '10px', maxWidth: '300px'}}
                        />
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Communiquer</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            17. Quelle eau min√©rale convient le mieux √† Cyril ?
                        </p>
                        <div style={{display: 'flex', gap: '20px', marginTop: '10px'}}>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question17"
                                    value="Contrex"
                                    onChange={() => handleInputChange('question17', 'Contrex')}
                                    style={{marginRight: '8px'}}
                                />
                                Contrex
                            </label>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question17"
                                    value="Volvic"
                                    onChange={() => handleInputChange('question17', 'Volvic')}
                                    style={{marginRight: '8px'}}
                                />
                                Volvic
                            </label>
                        </div>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Communiquer</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            18. Quelle eau est consid√©r√©e comme "calcique" ?
                        </p>
                        <div style={{display: 'flex', gap: '20px', marginTop: '10px'}}>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question18"
                                    value="Contrex"
                                    onChange={() => handleInputChange('question18', 'Contrex')}
                                    style={{marginRight: '8px'}}
                                />
                                Contrex
                            </label>
                            <label style={{display: 'flex', alignItems: 'center'}}>
                                <input
                                    type="radio"
                                    name="question18"
                                    value="Volvic"
                                    onChange={() => handleInputChange('question18', 'Volvic')}
                                    style={{marginRight: '8px'}}
                                />
                                Volvic
                            </label>
                        </div>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Communiquer</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            19. L'eau Contrex est-elle recommand√©e pour Cyril ?
                        </p>
                        <textarea
                            className="form-control"
                            rows="2"
                            value={answers.question19}
                            onChange={(e) => handleInputChange('question19', e.target.value)}
                            style={{marginTop: '10px'}}
                        ></textarea>
                    </div>

                    <div className="question-content">
                        <h4 className="vect-title"
                            style={{display: 'inline', marginRight: '10px'}}>
                            <span>Communiquer</span>
                        </h4>
                        <p style={{display: 'inline', textAlign: 'justify'}}>
                            20. L'eau Volvic est-elle recommand√©e pour Cyril ?
                        </p>
                        <textarea
                            className="form-control"
                            rows="2"
                            value={answers.question20}
                            onChange={(e) => handleInputChange('question20', e.target.value)}
                            style={{marginTop: '10px'}}
                        ></textarea>
                    </div>

                    {/* Boutons de correction pour les nouvelles questions */}
                    <div style={{display: 'flex', flexWrap: 'wrap', gap: '10px', marginTop: '20px'}}>
                        {[13, 14, 15, 16, 17, 18, 19, 20].map(qNum => (
                            <button
                                key={qNum}
                                className="correction-btnoptic"
                                onClick={() => toggleCorrection(`question${qNum}`)}
                            >
                                <FaCheck/> Q{qNum} {showCorrections[`question${qNum}`] ? 'Masquer' : 'Afficher'}
                            </button>
                        ))}
                    </div>
                </section>
            </div>

            {modalState.show && (<ModalImage
                imageUrl={modalState.imageUrl}
                altText={modalState.altText}
                onClose={closeModal}
            />)}
        </div>
    </>);
};

export default Act3et4Chimie;