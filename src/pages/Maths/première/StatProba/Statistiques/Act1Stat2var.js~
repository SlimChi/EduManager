import React, {useRef, useState} from 'react';
import {FaPrint, FaCheck, FaIndustry, FaCog} from 'react-icons/fa';
import {IoMdSchool} from 'react-icons/io';
import '../../../../../styles/activites.css';
import {useLocation, useParams} from 'react-router-dom';
import BackButton from '../../../../../components/navigation/BackButton';
import PrintManager from '../../../../../utils/PrintManager';
import 'katex/dist/katex.min.css';
import {BlockMath, InlineMath} from 'react-katex';
import {Card} from "react-bootstrap";
import ModalImage from "../../../../../utils/ModalImage";
import schemaUsinage from "../../../../../assets/etiquetteprofondeur.png";
import AutoEvaluationGrid from "../../../../../config/AutoEvaluationGrid";
import schemaVoiture from "../../../../../assets/etiquetteVoiture.png";
import {Typography} from "@mui/material";
import Automatismes2 from "../../../../../config/Automatismes2";

const Act1Stat2var = () => {
    const {classId} = useParams();
    const location = useLocation();
    const className = location.state?.className || '';

    const contentRef = useRef();
    const [showSummary, setShowSummary] = useState(false);

    // √âtats pour les r√©ponses et corrections
    const [answers, setAnswers] = useState({
        activity1_q1: '',
        activity1_q2: '',
        activity1_q3: '',
        activity1_q4: '',
        activity2_q1: '',
        activity2_q2: '',
        activity2_q3: '',
        activity2_q4: '',
        activity2_q5: '',
    });

    const [showCorrections, setShowCorrections] = useState({
        activity1_q1: false,
        activity1_q2: false,
        activity1_q3: false,
        activity1_q4: false,
        activity2_q1: false,
        activity2_q2: false,
        activity2_q3: false,
        activity2_q4: false,
        activity2_q5: false,
    });

    // R√©ponses attendues
    const correctAnswers = {
        activity1_q1: {
            formatted: <div>
                <p>Les valeurs de profondeurs et de pressions dans la zone abyssale sont :</p>
                <table className="table table-bordered mt-2" style={{fontSize: '14px', width: 'auto'}}>
                    <thead className="table-primary">
                    <tr>
                        <th>Profondeur (m)</th>
                        <th>800</th>
                        <th>2000</th>
                        <th>2500</th>
                        <th>3000</th>
                        <th>3500</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Pression (bar)</td>
                        <td>81</td>
                        <td>201</td>
                        <td>251</td>
                        <td>301</td>
                        <td>351</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        },
        activity1_q2: {
            formatted: <p>Le nuage de points pr√©sente des points presque align√©s, ce qui sugg√®re une relation lin√©aire
                entre la profondeur et la pression dans la zone abyssale.</p>
        },
        activity1_q3: {
            formatted: <p>La droite d'ajustement affine est trac√©e √† travers le nuage de points, minimisant les
                distances entre les points et la droite.</p>
        },
        activity1_q4: {
            formatted: <div>
                <p>Pour une pression de 290 bar, on trouve x ‚âà 2800 m</p>
                <p>Le sous-marin d√©tenant le record du monde de plong√©e est all√© jusqu'√† une profondeur d'environ 2800
                    m.</p>
            </div>
        },
        activity2_q1: {
            formatted: <p>Le nuage de points pr√©sente des points presque align√©s, ce qui indique une croissance lin√©aire
                du nombre de voitures √©lectriques au fil du temps.</p>
        },
        activity2_q2: {
            formatted: <BlockMath math="y = 0.23x - 460.2"/>
        },
        activity2_q3: {
            formatted: <div>
                <BlockMath math="y = 0.23 \times 2030 - 460.2 = 466.9 - 460.2 = 6.7"/>
                <p>En 2030, le nombre de voitures √©lectriques pourrait √™tre √©gal selon nos pr√©visions √† environ 6,7
                    millions.</p>
            </div>
        },
        activity2_q4: {
            formatted: <div>
                <BlockMath math="t = \frac{6.7 - 4.2}{4.2} \times 100 = \frac{2.5}{4.2} \times 100 \approx 59.5\%"/>
                <p>Soit environ 60% d'augmentation.</p>
            </div>
        },
        activity2_q5: {
            formatted: <p>Le nombre de voitures √©lectriques pourrait atteindre 6,7 millions en 2030, soit une
                augmentation d'environ 60% par rapport √† 2021.</p>
        }
    };

    // Gestionnaires d'√©v√©nements
    const handleInputChange = (field, value) => {
        setAnswers((prev) => ({...prev, [field]: value}));
    };

    const toggleCorrection = (field) => {
        setShowCorrections((prev) => ({...prev, [field]: !prev[field]}));
    };

    const toggleSummary = () => {
        setShowSummary(!showSummary);
    };

    if (className === 'Seconde-stat2var-act1') {
        return <div>Cette activit√© n'est pas disponible pour cette classe.</div>;
    }

    return (<>
        <BackButton/>
        <div className="tp-container" ref={contentRef} style={{fontFamily: 'Cambria Math'}}>
            <PrintManager
                contentRef={contentRef}
                activityName="Statistiques_2_variables"
                pageCount={2}
                quality="hd"
            />
            {/* PAGE DE GARDE */}
            <div className="print-page">
                <div className="cover-page" style={{
                    height: '100%',
                    display: 'flex',
                    flexDirection: 'column',
                    justifyContent: 'center',
                    alignItems: 'center',
                    textAlign: 'center',
                    padding: '2rem',
                    background: 'linear-gradient(135deg, #ddf0ff 0%, #ffffff 50%, #4A90E2 50%, white 50%, white 100%)',
                    borderRadius: '8px',
                    boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',
                    fontFamily: 'Cambria Math, serif'
                }}>
                    {/* En-t√™te */}
                    <div style={{
                        marginBottom: '2rem',
                        padding: '2rem',
                        backgroundColor: 'white',
                        borderRadius: '12px',
                        boxShadow: '0 6px 12px rgba(0, 0, 0, 0.1)',
                        maxWidth: '90%'
                    }}>
                        <div style={{
                            display: 'flex',
                            justifyContent: 'center',
                            marginBottom: '1.5rem'
                        }}>
                            <div style={{
                                width: '80px',
                                height: '80px',
                                borderRadius: '50%',
                                backgroundColor: '#4A90E2',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                color: 'white',
                                fontSize: '2.5rem',
                                boxShadow: '0 4px 8px rgba(74, 144, 226, 0.3)'
                            }}>
                                üìä
                            </div>
                        </div>

                        <h1 style={{
                            color: '#2c3e50',
                            fontSize: '2.2rem',
                            fontWeight: '700',
                            marginBottom: '0.5rem'
                        }}>
                            CHAPITRE 1 - Statistiques √† Deux Variables
                        </h1>

                        <h2 style={{
                            color: '#4A90E2',
                            fontSize: '1.5rem',
                            fontWeight: '500',
                            marginBottom: '1.5rem'
                        }}>
                            Activit√©s d'exploration
                        </h2>

                        <div style={{
                            height: '3px',
                            width: '80px',
                            backgroundColor: '#4A90E2',
                            margin: '0 auto 1.5rem',
                            borderRadius: '3px'
                        }}></div>

                        <p style={{
                            color: '#7f8c8d',
                            fontSize: '1.1rem',
                            marginBottom: '2rem',
                            lineHeight: '1.6'
                        }}>
                            Exploration des relations entre variables quantitatives √† travers<br/>
                            des √©tudes de cas concrets et contemporains
                        </p>

                        <div style={{
                            display: 'flex',
                            flexWrap: 'wrap',
                            justifyContent: 'center',
                            gap: '1rem',
                            marginBottom: '2rem'
                        }}>
                            <div style={{
                                display: 'flex',
                                alignItems: 'center',
                                backgroundColor: '#f8f9fa',
                                padding: '0.5rem 1rem',
                                borderRadius: '20px',
                                fontSize: '0.9rem'
                            }}>
                                <FaIndustry style={{marginRight: '0.5rem', color: '#4A90E2'}}/>
                                Math√©matiques
                            </div>

                            <div style={{
                                display: 'flex',
                                alignItems: 'center',
                                backgroundColor: '#f8f9fa',
                                padding: '0.5rem 1rem',
                                borderRadius: '20px',
                                fontSize: '0.9rem'
                            }}>
                                <IoMdSchool style={{marginRight: '0.5rem', color: '#4A90E2'}}/>
                                Niveau Premi√®re
                            </div>
                        </div>
                    </div>

                    {/* Tableau des capacit√©s et connaissances */}
                    <div style={{
                        width: '100%',
                        marginBottom: '2rem',
                        backgroundColor: 'white',
                        borderRadius: '12px',
                        boxShadow: '0 6px 12px rgba(0, 0, 0, 0.1)',
                        padding: '1.5rem',
                        textAlign: 'left'
                    }}>
                        <h3 style={{
                            color: '#2c3e50',
                            textAlign: 'center',
                            marginBottom: '1.5rem',
                            fontSize: '1.4rem'
                        }}>
                            Capacit√©s et connaissances
                        </h3>

                        <table style={{
                            width: '100%',
                            borderCollapse: 'collapse',
                            fontSize: '0.9rem'
                        }}>
                            <thead>
                            <tr style={{backgroundColor: '#4A90E2', color: 'white'}}>
                                <th style={{
                                    padding: '0.75rem',
                                    border: '1px solid #ddd',
                                    textAlign: 'center'
                                }}>Capacit√©s
                                </th>
                                <th style={{
                                    padding: '0.75rem',
                                    border: '1px solid #ddd',
                                    textAlign: 'center'
                                }}>Connaissances
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td style={{padding: '0.75rem', border: '1px solid #ddd', verticalAlign: 'top'}}>
                                    Repr√©senter graphiquement √† l'aide d'outils num√©riques un nuage de points associ√© √†
                                    une s√©rie statistique √† deux variables quantitatives.
                                </td>
                                <td style={{padding: '0.75rem', border: '1px solid #ddd', verticalAlign: 'top'}}>
                                    Nuage de points associ√© √† une s√©rie statistique √† deux variables quantitatives.
                                </td>
                            </tr>
                            <tr style={{backgroundColor: '#f8f9fa'}}>
                                <td style={{padding: '0.75rem', border: '1px solid #ddd', verticalAlign: 'top'}}>
                                    R√©aliser un ajustement affine, √† l'aide des outils num√©riques.<br/>
                                    D√©terminer l'√©quation r√©duite d'une droite d'ajustement par la m√©thode des moindres
                                    carr√©s, √† l'aide d'outils num√©riques.<br/>
                                    Interpoler ou extrapoler des valeurs inconnues.
                                </td>
                                <td style={{padding: '0.75rem', border: '1px solid #ddd', verticalAlign: 'top'}}>
                                    Ajustement affine par la m√©thode des moindres carr√©s.
                                </td>
                            </tr>
                            <tr>
                                <td style={{padding: '0.75rem', border: '1px solid #ddd', verticalAlign: 'top'}}>
                                    D√©terminer le coefficient de d√©termination d'une s√©rie statistique √† deux variables
                                    quantitatives √† l'aide d'outils num√©riques.<br/>
                                    √âvaluer la pertinence d'un ajustement affine.
                                </td>
                                <td style={{padding: '0.75rem', border: '1px solid #ddd', verticalAlign: 'top'}}>
                                    Coefficient de d√©termination R¬≤.
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <Automatismes2/>

                </div>
            </div>
            {/* PAGE 1 - ACTIVIT√â 1 */}
            <div className="print-page">
                <div className="math-chapter-box green mt-0" style={{padding: '0'}}>
                    <span style={{marginRight: '10px', fontSize: '30px'}}>üìä</span>
                    <h2 className="math-chapter-title-test mt-0">Statistiques √† deux variables</h2>
                </div>
                <div className="activity-header mt-0">
                    <span className="activity-badge">ACTIVIT√â 1</span>
                    <div className="activity-title">
                      <span className="course-title mt-0">
                        <span>üåä</span> Repr√©senter un nuage de points !
                      </span>
                    </div>
                </div>

                <div>

                    <div className="renovation-contexte2" style={{width: '100%'}}>
                        <div style={{display: 'flex', flexDirection: 'row', width: '100%'}}>
                            <div style={{
                                flex: '1 1 70%', paddingRight: '20px', textAlign: 'justify',
                                textJustify: 'inter-word',
                                fontSize: '15px',
                                lineHeight: '1.3'
                            }}>
                                <p>Dans le cadre d'un projet scientifique, une classe d√©cide d'envoyer une sonde
                                    sous-marine
                                    afin de mesurer la pression de l'eau au fur et √† mesure de la descente.</p>

                                <p>Dans l'oc√©an, plus on s'enfonce, plus la pression augmente, mais l'√©volution
                                    n'est pas
                                    parfaitement r√©guli√®re.</p>

                                <p>Lors de la plong√©e, la sonde a relev√© plusieurs valeurs de pression selon la
                                    profondeur
                                    atteinte :</p>

                                <table className="table table-bordered mt-3"
                                       style={{fontSize: '12px', margin: '0 auto', width: '100%'}}>
                                    <thead className="table-primary">
                                    <tr>
                                        <th>Profondeur (m)</th>
                                        <th>0</th>
                                        <th>100</th>
                                        <th>200</th>
                                        <th>400</th>
                                        <th>600</th>
                                        <th>800</th>
                                        <th>2000</th>
                                        <th>2500</th>
                                        <th>2900</th>
                                        <th>3000</th>
                                        <th>3500</th>
                                        <th>4600</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Pression (bar)</td>
                                        <td>1</td>
                                        <td>11</td>
                                        <td>21</td>
                                        <td>41</td>
                                        <td>61</td>
                                        <td>81</td>
                                        <td>201</td>
                                        <td>251</td>
                                        <td>291</td>
                                        <td>301</td>
                                        <td>351</td>
                                        <td>461</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div style={{
                                flex: '1 1 30%',
                                display: 'flex',
                                flexDirection: 'column',
                                alignItems: 'center'
                            }}>
                                <img
                                    src={schemaUsinage}
                                    alt="Sonde sous-marine"
                                    className="img-fluid rounded shadow-sm"
                                    style={{
                                        width: '100%',
                                        maxWidth: '230px',
                                        height: 'auto',
                                        border: '1px solid #ddd',
                                    }}
                                />
                            </div>

                        </div>

                        <Typography variant="body1" sx={{mt: 3}}>
                            Dans la zone abyssale, qui commence √†{' '}
                            <Typography component="span" sx={{fontWeight: 'bold', color: 'blue'}}>
                                2000 m
                            </Typography>{' '}
                            de profondeur, le sous-marin le plus profond a mesur√© une pression d‚Äôenviron{' '}
                            <Typography component="span" sx={{fontWeight: 'bold', color: 'red'}}>
                                290 bar
                            </Typography>{' '}
                            avant de remonter.
                        </Typography>

                    </div>

                </div>

                <div className="objectif-box" style={{marginTop: '10px'}}>
                    <p><strong>Objectif :</strong> L'objectif est de d√©terminer la profondeur record atteinte par un
                        sous-marin</p>
                </div>

                <div className="row" style={{marginTop: '4px'}}>
                    {/* Colonne de gauche */}
                    <div className="col-md-6">
                        <div className="question-card">
                            <div className="question-content">
                                <h4 className="vect-title"><span>1 . S'approprier, Analyser/Raisonner</span></h4>
                                <div className="answer-area">
                                    <p className="mb-2">Compl√©tez le tableau avec les valeurs de profondeurs et de
                                        pressions dans la zone abyssale :</p>

                                    <table className="table table-bordered mt-3"
                                           style={{fontSize: '14px', maxWidth: '500px'}}>
                                        <thead className="table-primary">
                                        <tr>
                                            <th>Profondeur (m)</th>
                                            <th>Pression (bar)</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {[0, 1, 2, 3, 4, 5].map((index) => (
                                            <tr key={index}>
                                                <td>
                                                    <input
                                                        type="number"
                                                        className="form-control form-control-sm"
                                                        value={answers[`activity1_q1_depth_${index}`] || ''}
                                                        onChange={(e) => handleInputChange(`activity1_q1_depth_${index}`, e.target.value)}
                                                    />
                                                </td>
                                                <td>
                                                    <input
                                                        type="number"
                                                        className="form-control form-control-sm"
                                                        value={answers[`activity1_q1_pressure_${index}`] || ''}
                                                        onChange={(e) => handleInputChange(`activity1_q1_pressure_${index}`, e.target.value)}
                                                    />
                                                </td>
                                            </tr>
                                        ))}
                                        </tbody>
                                    </table>

                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity1_q1')}
                                    >
                                        <FaCheck/> {showCorrections.activity1_q1 ? 'Masquer' : 'Correction'}
                                    </button>

                                    {showCorrections.activity1_q1 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <table className="table table-bordered mt-2" style={{fontSize: '14px'}}>
                                                <thead className="table-success">
                                                <tr>
                                                    <th>Profondeur (m)</th>
                                                    <th>2000</th>
                                                    <th>2500</th>
                                                    <th>2900</th>
                                                    <th>3000</th>
                                                    <th>3500</th>
                                                    <th>4600</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>Pression (bar)</td>
                                                    <td>201</td>
                                                    <td>251</td>
                                                    <td>291</td>
                                                    <td>301</td>
                                                    <td>351</td>
                                                    <td>461</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <p className="mt-2">Dans la zone abyssale (au-del√† de 2000 m), les valeurs
                                                de profondeur et pression sont celles du tableau ci-dessus.</p>
                                        </div>
                                    )}
                                </div>

                                <h4 className="vect-title" style={{marginTop: '15px'}}>
                                    <span>2 . S'approprier, R√©aliser</span></h4>
                                <p>a. √Ä partir du tableau obtenu √† la question 1, repr√©sentez, √† l'aide de la
                                    calculatrice, l'ensemble des points d'abscisses x correspondant √† la profondeur et
                                    d'ordonn√©es y correspondant √† la pression.</p>
                            </div>

                        </div>
                    </div>

                    {/* Colonne de droite */}
                    <div className="col-md-6">
                        <div className="question-card">
                            <div className="question-content">
                                <h4 className="vect-title"><span>3 . S'approprier, R√©aliser</span></h4>
                                <p>b. L'ensemble des points ainsi plac√©s forme un nuage de points. D√©crivez son
                                    allure.</p>

                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity1_q2}
                                        onChange={(e) => handleInputChange('activity1_q2', e.target.value)}
                                        rows={2}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity1_q2')}
                                    >
                                        <FaCheck/> {showCorrections.activity1_q2 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity1_q2 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>a. Les points √† placer sont : (2000, 201), (2500, 251), (2900, 291),
                                                (3000, 301), (3500, 351), (4600, 461)</p>
                                            <p>b. Le nuage de points est parfaitement align√© sur une droite. Les points
                                                sont parfaitement corr√©l√©s lin√©airement.</p>
                                        </div>
                                    )}
                                </div>
                                <p>Tracez, √† l'aide de la calculatrice, la droite appel√©e droite d'ajustement affine.
                                    Cette droite traduit approximativement l'√©volution du nuage de points.</p>

                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity1_q3}
                                        onChange={(e) => handleInputChange('activity1_q3', e.target.value)}
                                        rows={2}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity1_q3')}
                                    >
                                        <FaCheck/> {showCorrections.activity1_q3 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity1_q3 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>La droite d'ajustement affine a pour √©quation : y = 0,1x + 1</p>
                                            <p>En effet, on constate que pour chaque valeur : Pression = 0,1 √ó
                                                Profondeur + 1</p>
                                            <p>Exemple : Pour 2000 m ‚Üí 0,1 √ó 2000 + 1 = 200 + 1 = 201 bar ‚úì</p>
                                        </div>
                                    )}
                                </div>

                                <h4 className="vect-title" style={{marginTop: '15px'}}>
                                    <span>4 . Analyser/Raisonner, R√©aliser, Valider, Communiquer</span>
                                </h4>
                                <p>√Ä partir de la droite d'ajustement trac√©e dans la zone abyssale, d√©terminez la valeur
                                    de la profondeur, arrondie au m√®tre pr√®s, pour une pression de 290 bar.</p>
                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity1_q4}
                                        onChange={(e) => handleInputChange('activity1_q4', e.target.value)}
                                        rows={2}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity1_q4')}
                                    >
                                        <FaCheck/> {showCorrections.activity1_q4 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity1_q4 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>On utilise l'√©quation de la droite : y = 0,1x + 1</p>
                                            <p>Avec y = 290 bar, on a : 290 = 0,1x + 1</p>
                                            <p>0,1x = 290 - 1 = 289</p>
                                            <p>x = 289 / 0,1 = 2890 m√®tres</p>
                                            <p>La profondeur record atteinte par le sous-marin est d'environ <strong>2890
                                                m√®tres</strong>.</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style={{
                        padding: '14px',
                        backgroundColor: '#e8f5e9',
                        borderLeft: '4px solid #4caf50',
                        borderRadius: '8px'
                    }}>
                        <p style={{
                            fontWeight: 'bold',
                            color: '#2e7d32',
                            margin: 0
                        }}>
                            üí° √Ä retenir
                        </p>
                        <p style={{
                            color: '#37474f',
                            fontSize: '14px'
                        }}>
                            1. Le <span
                            style={{
                                borderBottom: '1px solid #4caf50',
                                padding: '0 4px'
                            }}>______________________</span> montre la
                            relation entre <span
                            style={{
                                borderBottom: '1px solid #4caf50',
                                padding: '0 4px'
                            }}>______________</span>. La <span
                            style={{
                                borderBottom: '1px solid #4caf50',
                                padding: '0 4px'
                            }}>____________________________________________</span> permet de
                            <span
                                style={{
                                    borderBottom: '1px solid #4caf50',
                                    padding: '0 4px'
                                }}>____________________________________________</span> .
                        </p>
                        <p style={{
                            color: '#37474f',
                            margin: 0,
                            fontSize: '14px'
                        }}>

                        </p>
                    </div>

                </div>
            </div>

            {/* PAGE 2 - ACTIVIT√â 2 */}
            <div className="print-page">
                <div className="activity-header mt-0">
                    <span className="activity-badge">ACTIVIT√â 2</span>
                    <div className="activity-title">
      <span className="course-title">
        <span>üîã</span> √âvolution du nombre de voitures √©lectriques dans le monde
      </span>
                    </div>
                </div>

                <div className="renovation-contexte2" style={{width: '100%'}}>
                    <div style={{display: 'flex', flexDirection: 'row', width: '100%'}}>
                        <div style={{flex: '1 1 70%', paddingRight: '20px'}}>
                            <p>Depuis le d√©but des ann√©es 2000, le nombre de voitures √©lectriques en circulation
                                augmente fortement. Cela repr√©sente un enjeu majeur pour les soci√©t√©s, notamment en
                                lien avec la transition √©nerg√©tique et la r√©duction des √©missions de CO‚ÇÇ.</p>

                            <p>Le tableau ci-dessous pr√©sente l'√©volution du nombre de voitures √©lectriques en
                                circulation entre 2005 et 2021 :</p>
                        </div>

                        <div style={{
                            flex: '1 1 30%',
                            display: 'flex',
                            flexDirection: 'column',
                            alignItems: 'center'
                        }}>
                            <img
                                src={schemaVoiture}
                                alt="Voiture √©lectrique"
                                className="img-fluid rounded shadow-sm"
                                style={{
                                    width: '100%',
                                    maxWidth: '250px',
                                    height: 'auto',
                                    border: '1px solid #ddd',
                                }}
                            />
                        </div>
                    </div>

                    <table className="table table-bordered mt-0"
                           style={{fontSize: '14px', margin: '0 auto', width: '100%'}}>
                        <thead className="table-primary">
                        <tr>
                            <th>Ann√©e</th>
                            <th>2005</th>
                            <th>2010</th>
                            <th>2015</th>
                            <th>2017</th>
                            <th>2019</th>
                            <th>2021</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>V√©hicules (millions)</td>
                            <td>0,1</td>
                            <td>0,97</td>
                            <td>2,07</td>
                            <td>2,86</td>
                            <td>3,46</td>
                            <td>4,20</td>
                        </tr>
                        </tbody>
                    </table>

                    <p className="mt-3">Les projections indiquent que la croissance devrait se poursuivre
                        jusqu'en 2035 avant de ralentir.</p>
                </div>

                <div className="objectif-box" style={{marginTop: '10px'}}>
                    <p><strong>Objectif :</strong> L'objectif est de pr√©voir l'√©volution du nombre de voitures
                        √©lectriques d'ici 2030</p>
                </div>

                <div className="row" style={{marginTop: '10px'}}>
                    {/* Colonne de gauche */}
                    <div className="col-md-6">
                        <div className="question-card">
                            <div className="question-content">
                                <h4 className="vect-title"><span>1 . S'approprier, R√©aliser, Analyser/Raisonner</span>
                                </h4>
                                <p>a. Ouvrez le fichier Excel fictif ¬´ C02_09_voitures.xlsx ¬ª, puis compl√©tez le tableau
                                    en reportant les valeurs donn√©es ci-dessus.</p>
                                <p>b. En s√©lectionnant les cellules correspondantes (Ann√©e et V√©hicules), repr√©sentez la
                                    s√©rie statistique √† deux variables √† l'aide d'un nuage de points.</p>
                                <p>c. D√©crivez l'allure du nuage de points.</p>

                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity2_q1}
                                        onChange={(e) => handleInputChange('activity2_q1', e.target.value)}
                                        rows={1}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity2_q1')}
                                    >
                                        <FaCheck/> {showCorrections.activity2_q1 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity2_q1 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>a. Le tableau Excel doit contenir les donn√©es : (2005, 0,1), (2010,
                                                0,97), (2015, 2,07), (2017, 2,86), (2019, 3,46), (2021, 4,20)</p>
                                            <p>b. Le nuage de points est cr√©√© en s√©lectionnant les colonnes Ann√©e et
                                                V√©hicules.</p>
                                            <p>c. Les points du nuage sont presque align√©s.</p>
                                        </div>
                                    )}
                                </div>

                                <h4 className="vect-title" style={{marginTop: '15px'}}><span>2 . R√©aliser</span></h4>
                                <p>√Ä partir du nuage de points, tracez la droite d'ajustement affine et donnez son
                                    √©quation.</p>

                                <div className="answer-area">
                                        <textarea
                                            className="answer-input"
                                            value={answers.activity2_q2}
                                            onChange={(e) => handleInputChange('activity2_q2', e.target.value)}
                                            rows={1}
                                        ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity2_q2')}
                                    >
                                        <FaCheck/> {showCorrections.activity2_q2 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity2_q2 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>L'√©quation de la droite d'ajustement affine est :</p>
                                            <BlockMath math="y = 0,25x - 511,06"/>
                                            <p>O√π x repr√©sente l'ann√©e et y le nombre de voitures √©lectriques en
                                                millions.</p>
                                        </div>
                                    )}
                                </div>
                                <h4 className="vect-title"><span>3 . R√©aliser, Valider</span></h4>
                                <p>a. Utilisez cette √©quation pour calculer le nombre de voitures √©lectriques en 2030.
                                    Arrondissez au dixi√®me.</p>
                                <p>b. Compl√©tez la phrase : ¬´ En 2030, le nombre de voitures √©lectriques pourrait √™tre
                                    √©gal selon nos pr√©visions √† environ ______ millions. ¬ª</p>

                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity2_q3}
                                        onChange={(e) => handleInputChange('activity2_q3', e.target.value)}
                                        rows={2}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity2_q3')}
                                    >
                                        <FaCheck/> {showCorrections.activity2_q3 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity2_q3 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>a. Calcul pour x = 2030 :</p>
                                            <BlockMath math="y = 0,25 \times 2030 - 511,06 = 517,24 - 511,06  = 6,1"/>
                                            <p>Arrondi au dixi√®me : <strong>6,0 millions</strong></p>
                                            <p>b. ¬´ En 2030, le nombre de voitures √©lectriques pourrait √™tre √©gal selon
                                                nos pr√©visions √† environ <strong>6,0</strong> millions. ¬ª</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Colonne de droite */}
                    <div className="col-md-6">
                        <div className="question-card">
                            <div className="question-content " style={{marginTop: '-13px'}}>
                                <h4 className="vect-title" style={{
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: '5px',
                                    flexWrap: 'wrap'
                                }}>
                                    <span>4 . R√©aliser</span>
                                    <div>
                                        <div className="formula-content">

                                            <div className="math-formula">
                                                <div className="fraction">
                                                    Taux
                                                </div>
                                                =
                                                <div className="fraction">
                                                    <span>V<sub>finale</sub> - V<sub>initiale</sub>)</span>
                                                    <span>V<sub>initiale</sub></span>
                                                </div>
                                                <span> √ó 100</span>
                                            </div>
                                        </div>
                                    </div>
                                </h4>

                                <p>Calculez le taux d'augmentation du nombre de voitures √©lectriques entre 2021 et 2030.
                                    Arrondissez √† l'unit√©.</p>

                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity2_q4}
                                        onChange={(e) => handleInputChange('activity2_q4', e.target.value)}
                                        rows={2}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity2_q4')}
                                    >
                                        <FaCheck/> {showCorrections.activity2_q4 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity2_q4 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>Calcul du taux d'augmentation :</p>
                                            <BlockMath
                                                math="t = \frac{6,0 - 4,2}{4,2} \times 100 = \frac{1,8}{4,2} \times 100 \approx 42,85\%"/>
                                            <p>Arrondi √† l'unit√© : <strong>43%</strong> d'augmentation entre 2021 et
                                                2030.</p>
                                        </div>
                                    )}
                                </div>

                                <h4 className="vect-title" style={{marginTop: '15px'}}><span>5 . Communiquer</span></h4>
                                <p>Combien de voitures √©lectriques pourrait-on avoir en 2030 ?</p>

                                <div className="answer-area">
                                    <textarea
                                        className="answer-input"
                                        value={answers.activity2_q5}
                                        onChange={(e) => handleInputChange('activity2_q5', e.target.value)}
                                        rows={2}
                                    ></textarea>
                                    <button
                                        className="correction-btnoptic"
                                        onClick={() => toggleCorrection('activity2_q5')}
                                    >
                                        <FaCheck/> {showCorrections.activity2_q5 ? 'Masquer' : 'Correction'}
                                    </button>
                                    {showCorrections.activity2_q5 && (
                                        <div className="correction-box">
                                            <p><strong>Correction :</strong></p>
                                            <p>Si la tendance se poursuit, le nombre de voitures √©lectriques pourrait
                                                atteindre 6,0 millions en 2030, ce qui repr√©sente une augmentation
                                                d'environ 43% par rapport √† 2021, contribuant ainsi √† la transition
                                                √©nerg√©tique et √† la r√©duction des √©missions de CO‚ÇÇ.</p>
                                        </div>
                                    )}
                                </div>

                                {/* AutoEvaluationGrid r√©duit et bien align√© */}
                                <div style={{
                                    width: '150%',
                                    overflow: 'hidden',
                                    marginTop: '20px',
                                    transform: 'scale(0.7)',
                                    transformOrigin: 'top left',
                                    marginBottom: '-31%'
                                }}>
                                    <AutoEvaluationGrid/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </>);
};

export default Act1Stat2var;